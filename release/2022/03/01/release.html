<head>
    <!-- meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Library for deep learning on graphs">
    <meta name="keywords" content="Software, Machine Learning, Deep Learning, Neural Network, Graph">
    <meta name="author" content="Themeix">

    <!-- Site Title -->
    <title>Deep Graph Library</title>

    <!-- favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/dgl-favicon.png">

    <!-- IView CSS -->
    <link rel="stylesheet" href="//unpkg.com/iview/dist/styles/iview.css">

    <!-- Bootstrap CSS -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font-Awesome CSS -->
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="/assets/css/googlefont.css" rel="stylesheet"> 

    <!-- Animate CSS -->
    <link rel="stylesheet" href="/assets/css/animate.min.css">

    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
    <!--<link rel="stylesheet" href="/assets/css/owl.carousel.min.css">-->

    <!-- Mean Menu CSS -->
    <link rel="stylesheet" href="/assets/css/meanmenu.min.css">

    <!-- Main Stylesheet -->
    <link href="/assets/css/style.css" rel="stylesheet">

    <!-- Responsive CSS -->
    <link href="/assets/css/responsive.css" rel="stylesheet">

    <!-- Minima CSS -->
    <link href="/assets/main.css" rel="stylesheet">

    <!-- Rouge Highlighter CSS -->
    <link href="/assets/css/syntax.css" rel="stylesheet">

    <link type="application/atom+xml" rel="alternate" href="https://www.dgl.ai/feed.xml" title="Deep Graph Library" />

    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132455605-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-132455605-1');
</script>

    
</head>
  
<body>
    <!-- Preloader starts-->
    <div class="preloader">
        <div class="loading-center">
            <div class="loading-center-absolute">
                <div class="object object_one"></div>
                <div class="object object_two"></div>
                <div class="object object_three"></div>
            </div>
        </div>
    </div>
    <!-- Preloader ends -->
    <!-- Start Header -->
    <header>
      <!-- Start Mainmenu -->
<div class="menu-area navbar-fixed-top ">
    <div class="container">
        <div class="row">
            <div class="mainmenu-wrapper">
                <!-- Start Header Logo -->
                <div class="col-xs-12 col-md-3">
                    <div class="header-logo">
                        <a href="https://www.dgl.ai"><img src="/assets/images/logo.png" alt="logo"></a>
                    </div>
                </div>
                <!-- End Header Logo -->
                <!-- Start Navigation -->
                <div class="col-xs-12 col-md-9">
                    <div class="mainmenu">
                        <div class="navbar navbar-right">
                            <div class="navbar-header visible-xs">
                                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                            </div>
                            <div class="collapse navbar-collapse top-menu">

                           <!--  Static Dropdown Menu 

                                <nav>
                                    <ul class="nav navbar-nav">
                                        <li class="active"><a href="https://www.dgl.ai">Home<span>Get everything</span></a>
                                           <ul class="dropdown">
                                               <li><a href="index.html">Home Version 1</a></li>
                                               <li><a href="index-2.html">Home Version 2</a></li>
                                           </ul>                                                
                                        </li>
                                        <li><a href="about-us.html">About<span>Know about us</span></a></li>                                
                                        <li><a href="questions.html">Questions<span>Ask Your Question</span></a>
                                            <ul class="dropdown">
                                                <li>
                                                    <a href="questions.html"> <span><i class="fa fa-question-circle"></i></span>All Questions</a>
                                                </li>                                                       
                                                <li><a href="ask-question.html"><span><i class="fa  fa-question-circle-o"></i></span>Ask Questions</a></li>
                                                <li><a href="answers.html"><span><i class="fa fa-reply-all"></i></span>Answers</a></li>
                                                <li><a href="login.html"><span><i class="fa fa-sign-in"></i></span>Login</a></li>
                                                <li><a href="register.html"><span><i class="fa fa-registered"></i></span>Register</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Pages<span>See All Pages</span></a>
                                           <ul class="dropdown">
                                               <li><a href="index-2.html">Home 2</a></li>
                                               <li><a href="blog.html">Blog</a></li>
                                               <li><a href="blog-details.html">Blog Details</a></li>
                                               <li><a href="questions.html">Questions</a></li>
                                               <li><a href="answers.html">Answers</a></li>
                                               <li><a href="updates.html">Updates</a></li>
                                               <li><a href="contact.html">Contact</a></li>
                                               <li><a href="left-sidebar.html">Left Sidebar</a></li>
                                               <li><a href="right-sidebar.html">Right Sidebar</a></li>
                                               <li><a href="login.html">login</a></li>
                                               <li><a href="register.html">Register</a></li>
                                               <li><a href="404.html">404</a></li>
                                           </ul>
                                        </li>
                                        <li><a href="blog.html">Blog<span>All Blog Posts</span></a></li>
                                        <li><a href="updates.html">Updates<span>Latest releases</span></a></li>
                                        <li><a href="contact.html">Contact<span>Let us contact</span></a></li>
                                    </ul>
                                </nav> 

                                End Static Dropdown Menu -->

                                <nav>
                                    <ul class="nav navbar-nav">
                                    
                                    
                                    
                                    
                                     <li>
                                        <a href="/pages/about.html">about
                                          <!--<span>About DGL</span>-->
                                        </a>
                                     </li>
                                    
                                    
                                    
                                    
                                    
                                     <li>
                                        <a href="/pages/start.html">Get Started
                                          <!--<span>Install</span>-->
                                        </a>
                                     </li>
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                     <li>
                                        <a href="https://docs.dgl.ai/tutorials/blitz/index.html">Tutorials
                                        </a>
                                     </li>
                                     <li>
                                        <a href="/pages/index.html">Blogs
                                        </a>
                                     </li>
                                     <li>
                                        <a href="https://docs.dgl.ai">Docs
                                        </a>
                                     </li>
                                     <li>
                                        <a href="https://discuss.dgl.ai">Forum
                                        </a>
                                     </li>
                                     <li>
                                        <a href="https://github.com/dmlc/dgl">GitHub
                                        </a>
                                     </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Navigation -->
            </div>
        </div>
    </div>
</div>
<!-- End Mainmenu -->
<!-- Start Mobile Menu Area -->
<div class="col-xs-12 visible-xs">
    <div class="mobile-menu">
        <nav>
            <ul>
                <li><a href="/index.html">Home</a></li>
                
                
                
                
                 <li>
                    <a href="/pages/about.html">about
                    </a>
                 </li>
                
                
                
                
                
                 <li>
                    <a href="/pages/start.html">Get Started
                    </a>
                 </li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <!--
                <li><a href="#">Questions</a>
                    <ul>
                        <li><a href="questions.html"> Questions</a></li>
                        <li><a href="ask-question.html">Ask Questions</a></li>
                        <li><a href="answers.html">Answers</a></li>
                        <li><a href="login.html">Login</a></li>
                        <li><a href="register.html">Register</a></li>                               
                    </ul>
                </li>
                <li><a href="#">Pages</a>
                    <ul>
                       <li><a href="blog.html">Blog</a></li>
                       <li><a href="blog-details.html">Blog Details</a></li>
                       <li><a href="questions.html">Questions</a></li>
                       <li><a href="answers.html">Answers</a></li>
                       <li><a href="updates.html">Updates</a></li>
                       <li><a href="contact.html">Contact</a></li>
                       <li><a href="left-sidebar.html">Left Sidebar</a></li>
                       <li><a href="right-sidebar.html">Right Sidebar</a></li>
                       <li><a href="login.html">login</a></li>
                       <li><a href="register.html">Register</a></li>
                       <li><a href="404.html">404</a></li>                          
                    </ul>
                </li>                       
                -->
                <li><a href="https://docs.dgl.ai/tutorials/blitz/index.html">Tutorials</a></li>
                <li><a href="/pages/index.html">Blogs</a></li>
                <li><a href="https://docs.dgl.ai">Docs</a></li>
                <li><a href="https://discuss.dgl.ai">Forum</a></li>
                <li><a href="https://github.com/dmlc/dgl">GitHub</a></li>
            </ul>
        </nav>
    </div>
</div>
<!-- End MObile Menu Area

   </header>
    <!-- End Header -->
<!-- Start Page Banner Area -->
<div class="page-banner-area">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="page-title">
          <h2>Blog Details</h2>
          <span class="sub-title"><a href="https://www.dgl.ai">Home</a> / Blog Details</span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End Pages Banner Area -->

<!-- Start Blog Area -->
<section class="blog-area themeix-ptb">
  <div class="container">
    <div class="row">
      <!-- Start Blog Content -->
      <div class="col-md-12">
        <div class="blog-wrapper">

          <div class="single-blog-details">
            <div class="blog-img">
              <img src="/assets/images/posts/2022-03-01-release/update-image.jpg" alt="blog">
            </div>
            <div class="blog-content-desc">
              <h4 class="themeix-blog-h">v0.8 Release Highlights</h4>
              <p><p>We are excited to announce the release of DGL v0.8, which brings many new
features as well as improvement on system performance. The highlights are:</p>

<ul>
  <li>A major update of the mini-batch sampling pipeline, better customizability,
more optimizations; <strong>3.9x</strong> and <strong>1.5x</strong> faster for supervised and unsupervised
GraphSAGE on OGBN-Products, with only one line of code change.</li>
  <li>Significant acceleration and code simplification of popular heterogeneous
graph NN modules (Up to <strong>36x</strong> for RGCN convolution and <strong>12x</strong> for HGT
convolution). 11 new off-the-shelf NN modules for building models for link
prediction, heterogeneous graph learning and GNN explanation.</li>
  <li><strong>GNNLens</strong>: a DGL empowered tool to visualize and understand graph data using
GNN explanation models.</li>
  <li>New functions to create, transform and augment graph datasets, making it
easier to conduct research on graph contrastive learning or repurposing a
graph for different tasks.</li>
  <li><strong>DGL-Go</strong>: a new GNN model training command line tool that utilizes a simple
interface so that users can quickly apply GNNs to their problems and
orchestrate experiments with state-of-the-art GNN models.</li>
</ul>

<h2 id="mini-batch-sampling-pipeline-update">Mini-batch Sampling Pipeline Update</h2>

<p>In training Neural Networks, minibatch sampling has been used to both improve
model performance and enable scaling to large datasets.  Mini-batch training in
the context of GNNs on graphs introduces new complexities, which can be broken
down into four main steps:</p>

<ol>
  <li>Extract a subgraph from the original graph.</li>
  <li>Perform transformations on the subgraph.</li>
  <li>Fetch the node/edge features of the subgraph.</li>
  <li>Pass the subgraph and its features as the input to your GNN model and update parameters.</li>
</ol>

<p>Among them, steps 1-3 are unique to GNNs and are quite costly. In v0.7, we have
released the feature to speedup step 2 by transforming subgraphs on GPU, but
the other two may continue to be the bottleneck. In this release, we further
optimized the <em>entire</em> pipeline to reach an even better performance. We then
briefly describe our technical solutions behind that.</p>

<p>To speed up subgraph extraction, we utilized CUDA Unified Virtual Addressing(UVA).</p>

<p><img src="/assets/images/posts/2022-03-01-release/uva.png" alt="uva" width="400x" class="aligncenter" /></p>

<p>(Image courtesy: <a href="https://developer.download.nvidia.cn/CUDA/training/cuda_webinars_GPUDirect_uva.pdf">https://developer.download.nvidia.cn/CUDA/training/cuda_webinars_GPUDirect_uva.pdf</a>)</p>

<p>CUDA UVA allows users to create in-memory data beyond the size of GPU RAM
capacity while still harnessing GPU kernels for fast computation. Storing the
entire graph structure and its features in UVA enables efficient subgraph
extraction using GPU kernels, which is effective for training large-scale GNNs
[1][2]. In this release, users can turn on the UVA mode by setting the <code class="highlighter-rouge">use_uva</code>
flag in <code class="highlighter-rouge">DataLoader</code>, as shown in the example below:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="o">...</span>                  <span class="c"># some DGLGraph data</span>
<span class="n">train_nids</span> <span class="o">=</span> <span class="o">...</span>         <span class="c"># training node IDs</span>
<span class="n">sampler</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">dataloading</span><span class="o">.</span><span class="n">MultiLayerNeighborSampler</span><span class="p">(</span>
    <span class="n">fanout</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">])</span>
<span class="n">dataloader</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">dataloading</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span>
    <span class="n">g</span><span class="p">,</span> <span class="n">train_nids</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="s">'cuda:0'</span><span class="p">,</span>     <span class="c"># perform sampling on GPU 0</span>
    <span class="n">batch_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
    <span class="n">shuffle</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">use_uva</span><span class="o">=</span><span class="bp">True</span>         <span class="c"># turn on UVA optimization</span>
<span class="p">)</span>
</code></pre>
</div>

<p>To speed up feature fetching (step 3), DGL 0.8 supports pre-fetching node/edge
features so that the model computation can happen in parallel with data
movement. Users can specify the features as well as the labels to prefetch in
the sampler object.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="o">...</span>           <span class="c"># some DGLGraph data</span>
<span class="n">train_nids</span> <span class="o">=</span> <span class="o">...</span>  <span class="c"># training node IDs</span>
<span class="n">sampler</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">dataloading</span><span class="o">.</span><span class="n">MultiLayerNeighborSampler</span><span class="p">(</span>
    <span class="n">fanout</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">prefetch_node_feats</span><span class="o">=</span><span class="p">[</span><span class="s">'feat'</span><span class="p">],</span>   <span class="c"># prefetch node feature 'feat'</span>
    <span class="n">prefetch_labels</span><span class="o">=</span><span class="p">[</span><span class="s">'label'</span><span class="p">],</span>      <span class="c"># prefetch node label 'label'</span>
<span class="p">)</span>
<span class="n">dataloader</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">dataloading</span><span class="o">.</span><span class="n">DataLoader</span><span class="p">(</span>
    <span class="n">g</span><span class="p">,</span> <span class="n">train_nids</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="s">'cuda:0'</span><span class="p">,</span>     <span class="c"># perform sampling on GPU 0</span>
    <span class="n">batch_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
    <span class="n">shuffle</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">use_uva</span><span class="o">=</span><span class="bp">True</span>         <span class="c"># turn on UVA optimization</span>
<span class="p">)</span>
</code></pre>
</div>

<p>These optimizations bring significant speedup for both supervised and
unsupervised mini-batch training. We compared it against the original pipeline
of sampling on CPU but training on GPU for training a two-layer GraphSAGE model
on the ogbn-papers100M graph using A100 GPUs. We observed a speedup of 3.9x and
1.5x for supervised and unsupervised GraphSAGE on a single GPU respectively.
The speedup applies to multi-GPU training as well.</p>

<table>
  <thead>
    <tr>
      <th><img src="/assets/images/posts/2022-03-01-release/number1.png" alt="number1" /></th>
      <th><img src="/assets/images/posts/2022-03-01-release/number2.png" alt="number2" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Speedup of Supervised GraphSAGE</td>
      <td>Speedup of Unsupervised GraphSAGE</td>
    </tr>
  </tbody>
</table>

<p>Defining a new sampler in DGL v0.8 is also easier, with only one simple
interface <code class="highlighter-rouge">sample</code> to follow. Optionally, users can specify how to prefetch
features for each sample. For example, the cluster sampler used by Cluster-GCN
can be implemented in just a few lines of code.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ClusterGCNSampler</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">prefetch_ndata</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">part_ids</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">metis_partition_assignment</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
        <span class="c"># convert partition assignment to bins of nodes</span>
        <span class="n">part_sizes</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">part_ids</span><span class="o">.</span><span class="nb">float</span><span class="p">(),</span> <span class="n">k</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nb">int</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_bins</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">part_ids</span><span class="p">),</span> <span class="n">part_sizes</span><span class="p">)</span>
        <span class="c"># save the node feature names to be prefetched</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefetch_ndata</span> <span class="o">=</span> <span class="n">prefetch_ndata</span>

    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">part_ids</span><span class="p">):</span>
        <span class="s">"""Sample a subgraph given a list of partition IDs."""</span>
        <span class="n">node_ids</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">node_bins</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">part_ids</span><span class="p">])</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">node_ids</span><span class="p">)</span>  <span class="c"># get an induced subgraph</span>
        <span class="c"># tell which feature to pre-fetch</span>
        <span class="n">dgl</span><span class="o">.</span><span class="n">set_node_lazy_feature</span><span class="p">(</span><span class="n">sg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefetch_ndata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sg</span>
</code></pre>
</div>

<p>New samplers in v0.8:</p>
<ul>
  <li><a href="https://docs.dgl.ai/generated/dgl.dataloading.ClusterGCNSampler.html#dgl.dataloading.ClusterGCNSampler"><code class="highlighter-rouge">dgl.dataloading.ClusterGCNSampler</code></a>: The sampler from <a href="https://arxiv.org/abs/1905.07953">Cluster-GCN: An
Efficient Algorithm for Training Deep and Large Graph Convolutional Networks</a>.</li>
  <li><a href="https://docs.dgl.ai/generated/dgl.dataloading.ShaDowKHopSampler.html#dgl.dataloading.ShaDowKHopSampler"><code class="highlighter-rouge">dgl.dataloading.ShaDowKHopSampler</code></a>: The sampler from <a href="https://arxiv.org/abs/2012.01380">Deep Graph Neural Networks with Shallow Subgraph Samplers</a>.</li>
</ul>

<p>This remarkable improvement would not happen without the help from the community.
We want to thank Xin Yao (@yaox12) and Dominique LaSalle (@nv-dlasalle) from
NVIDIA and David Min (@davidmin7) from UIUC for their contributions.</p>

<p><strong>Further reading:</strong></p>
<ul>
  <li>User guide chapter for <a href="https://docs.dgl.ai/guide/minibatch-custom-sampler.html">customizing graph samplers</a>.</li>
  <li>User guide chapter for <a href="https://docs.dgl.ai/guide/minibatch-prefetching.html">writing graph samplers with feature prefetching</a>.</li>
  <li><a href="https://github.com/dmlc/dgl/tree/master/examples/pytorch/cluster_gcn">Example implementation</a> of ClusterGCN.</li>
</ul>

<h2 id="nn-module-update">NN Module Update</h2>
<p>Heterogeneous GNNs are known to be both difficult to implement as well as
difficult to optimize. In this release, we have significantly improved the
speed of dgl.nn.RelGraphConv and dgl.nn.HGTConv – two state-of-the-art NN
modules for training on heterogeneous graphs, by sometimes an order of
magnitude compared with various baselines[3]:</p>

<table>
  <thead>
    <tr>
      <th><img src="/assets/images/posts/2022-03-01-release/number3.png" alt="number3" /></th>
      <th><img src="/assets/images/posts/2022-03-01-release/number4.png" alt="number4" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Speedup of RGCN convolution</td>
      <td>Speedup of HGT convolution</td>
    </tr>
  </tbody>
</table>

<p>More importantly, writing an efficient heterogeneous graph convolution is
substantially easier. Here is a minimal implementation of RGCN convolution in
0.8 using the new <a href="https://docs.dgl.ai/generated/dgl.nn.pytorch.TypedLinear.html#dgl.nn.pytorch.TypedLinear"><code class="highlighter-rouge">nn.TypedLinear</code></a> module:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RGCNConv</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_size</span><span class="p">,</span> <span class="n">out_size</span><span class="p">,</span> <span class="n">num_etypes</span><span class="p">):</span>
        <span class="c"># TypedLinear is a new module in 0.8!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linear_r</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">TypedLinear</span><span class="p">(</span><span class="n">in_size</span><span class="p">,</span> <span class="n">out_size</span><span class="p">,</span> <span class="n">num_etypes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">etype</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s">'x'</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">g</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="s">'etype'</span><span class="p">]</span> <span class="o">=</span> <span class="n">etype</span>
        <span class="n">g</span><span class="o">.</span><span class="n">update_all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">dgl</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="s">'h'</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">ndata</span><span class="p">[</span><span class="s">'h'</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edges</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linear_r</span><span class="p">(</span><span class="n">edges</span><span class="o">.</span><span class="n">src</span><span class="p">[</span><span class="s">'h'</span><span class="p">],</span> <span class="n">edges</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s">'etype'</span><span class="p">])</span>
</code></pre>
</div>

<p>This release also brings 11 new NN modules covering the most requested ones
from the community. They include but are not limited to:</p>
<ul>
  <li>Commonly used <a href="https://docs.dgl.ai/api/python/nn-pytorch.html#score-modules-for-link-prediction-and-knowledge-graph-completion">edge score modules</a> (e.g., TransE, TransR, etc.) for link
prediction.</li>
  <li><a href="https://docs.dgl.ai/api/python/nn-pytorch.html#heterogeneous-learning-modules">Linear projection module and embedding module for heterogeneous graphs</a>
(<code class="highlighter-rouge">nn.HeteroLinear</code> and <code class="highlighter-rouge">nn.HeteroEmbedding</code>).</li>
  <li>The <a href="https://docs.dgl.ai/generated/dgl.nn.pytorch.explain.GNNExplainer.html#dgl.nn.pytorch.explain.GNNExplainer"><code class="highlighter-rouge">GNNExplainer</code></a> module.</li>
</ul>

<h2 id="understand-graph-via-visualisation-and-gnn-based-explanation">Understand Graph via Visualisation and GNN-based Explanation</h2>
<p>Understanding graph data using GNN-based explanation model has become an
important research topic. We partnered with the HKUST VisLab team to release
GNNLens, an interactive visualization tool for graph neural networks.</p>

<p>To install GNNLens, <code class="highlighter-rouge">pip install gnnlens</code>.</p>

<p>It provides Python APIs for specifying the data to be visualized. For example,
the following shows how to load DGL’s built-in Cora graph dataset and visualize
it:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">dgl.data</span> <span class="kn">import</span> <span class="n">CoraGraphDataset</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">CoraGraphDataset</span><span class="p">()</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">gnnlens</span> <span class="kn">import</span> <span class="n">Writer</span>

<span class="c"># Specify the path to create a new directory for dumping data files.</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">Writer</span><span class="p">(</span><span class="s">'tutorial_graph'</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">add_graph</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Cora'</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">cora_graph</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">add_graph</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Citeseer'</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">citeseer_graph</span><span class="p">)</span>
<span class="c"># Finish dumping</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
</div>

<p>After running the script, you can then launch GNNLens with the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>gnnlens --logdir tutorial_graph
</code></pre>
</div>

<p>And you will see the webpage in your browser:</p>

<p><img src="/assets/images/posts/2022-03-01-release/gnnlens.png" alt="gnnlens" width="800x" class="aligncenter" /></p>

<p>GNNLens is not only capable of visualizing raw graph data, but also designed
for inspecting graph neural networks such as running explanation models to
explain the prediction. Please check out the tutorials in the project README:
<a href="https://github.com/dmlc/gnnlens2">https://github.com/dmlc/gnnlens2</a>.</p>

<h2 id="composable-graph-data-transforms">Composable Graph Data Transforms</h2>

<p>Graph data augmentation has become an important component for graph contrastive
learning or structural prediction in general. The new release makes it easier
to compose and apply various graph augmentation and transformation algorithms
to all DGL’s built-in dataset. The new <code class="highlighter-rouge">dgl.transforms</code> package follows the
style of the PyTorch Dataset Transforms. Users can specify the transforms to
use with the <code class="highlighter-rouge">transform</code> keyword argument of all DGL datasets:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">dgl</span>
<span class="kn">import</span> <span class="nn">dgl.transforms</span> <span class="kn">as</span> <span class="nn">T</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">Compose</span><span class="p">([</span>
    <span class="n">T</span><span class="o">.</span><span class="n">AddSelfLoop</span><span class="p">(),</span>
    <span class="n">T</span><span class="o">.</span><span class="n">GCNNorm</span><span class="p">(),</span>
<span class="p">])</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">CoraGraphDataset</span><span class="p">(</span><span class="n">transform</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c"># graph and features will be transformed automatically</span>
</code></pre>
</div>

<p>DGL v0.8 provides 16 commonly used data transform APIs. See the <a href="https://docs.dgl.ai/api/python/transforms.html">API
doc</a> for more information.</p>

<p>Making graph datasets easily accessible for all kinds of research is important. A common scenario is to adapt a dataset for a different task than it was originally designed for (e.g., training a link prediction model on Cora which is originally for node classification). We therefore add two dataset adapters (<a href="https://docs.dgl.ai/generated/dgl.data.AsNodePredDataset.html#dgl.data.AsNodePredDataset"><code class="highlighter-rouge">dgl.data.AsNodePredDataset</code></a> and <a href="https://docs.dgl.ai/generated/dgl.data.AsLinkPredDataset.html#dgl.data.AsLinkPredDataset"><code class="highlighter-rouge">dgl.data.AsLinkPredDataset</code></a>) for this purpose. We also support generating new train/val/test split and save them for later use:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">dgl</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">CoraGraphDataset</span><span class="p">()</span>
<span class="c"># make a Cora dataset suitable for link prediction</span>
<span class="c"># add train/val/test split and negative samples</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">AsLinkPredDataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">split_ratio</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="n">neg_ratio</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="one-more-thing">One more thing</h2>

<p>As GNN is still a young and blooming domain, we received many “how to start” questions from our users:</p>

<ul>
  <li><em>“I’ve heard about GNNs, how to start training a GNN model on my own datasets?”</em></li>
  <li><em>“I want to learn more about GNNs, how to start experimenting with SOTA baselines?”</em></li>
  <li><em>“I have some new research ideas, how to start building it upon existing GNN models?”</em></li>
</ul>

<p>To make those first steps easier, we developed <strong>DGL-Go</strong>, a command line tool for
users to quickly access the latest GNN research progress.</p>

<p><img src="/assets/images/posts/2022-03-01-release/dglgo.png" alt="dglgo" width="600x" class="aligncenter" /></p>

<p>Using DGL-Go is as easy as three steps:</p>
<ol>
  <li>Use <code class="highlighter-rouge">dgl configure</code> to pick the task, dataset and model of your interests.
It generates a configuration file for later use. You could also use <code class="highlighter-rouge">dgl
recipe get</code> to retrieve a configuration file we provided.</li>
  <li>Use <code class="highlighter-rouge">dgl train</code> to launch training according to the configuration and see
the results.</li>
  <li>Use <code class="highlighter-rouge">dgl export</code> to generate a <strong>self-contained, reproducible</strong> Python
script for advanced customization, or try the model on custom data stored in
CSV format.</li>
</ol>

<p>Install DGL-Go simply by <code class="highlighter-rouge">pip install dglgo</code> and check out the project <a href="https://github.com/dmlc/dgl/tree/master/dglgo">README</a> for more details.</p>

<h2 id="further-reading">Further Reading</h2>
<p>The full <a href="https://github.com/dmlc/dgl/releases/tag/0.8.0">release note</a> of DGL v0.8.</p>

<h2 id="reference">Reference</h2>
<p>[1] PyTorch-Direct: Enabling GPU Centric Data Access for Very Large Graph Neural Network Training with Irregular Accesses</p>

<p>[2] TorchQuiver: <a href="https://github.com/quiver-team/torch-quiver">https://github.com/quiver-team/torch-quiver</a></p>

<p>[3] We compared our new <code class="highlighter-rouge">nn.RelGraphConv</code> module with multiple existing baselines from DGL and PyG. For DGL v0.7, Baseline#1 uses the old <code class="highlighter-rouge">nn.RelGraphConv</code> module with <code class="highlighter-rouge">low_mem=False</code>; Baseline#2 uses the old <code class="highlighter-rouge">nn.RelGraphConv</code> with <code class="highlighter-rouge">low_mem=True</code>; Baseline#3 uses <code class="highlighter-rouge">nn.HeteroGarphConv</code>. For PyG, Baseline#1 uses <code class="highlighter-rouge">nn.RGCNConv</code> while Baseline#2 uses <code class="highlighter-rouge">nn.FastRGCNConv</code>. All the benchmarks are tested on one NVIDIA T4 GPU card.</p>
</p>
              <div class="blog-post-date">
                <p>01 <span>March</span> </p>
              </div>
              <div class="tag-links mt-30">
                <div class="widget">
                  <div class="tagcloud">
                    <a href="/tag/blog.html" class="set-2">blog</a> <a href="/tag/news.html" class="set-1">news</a> <a href="/tag/release.html" class="set-5">release</a>
                  </div>
                </div>
                <div class="blog-data">
                  <p>By 
                  
                  <a href="https://github.com/dmlc/dgl/">DGLTeam</a>,
                   in <a href="#">release</a> </p>
                </div>
              </div>
              <!-- Leave a Comment -->
              <div id="respond">
                <div class="comment-respond pb-50">
                  <div id='discourse-comments'></div>
                  <script type="text/javascript">
  DiscourseEmbed = { discourseUrl: 'https://discuss.dgl.ai/',
                     discourseEmbedUrl: 'https://www.dgl.ai/release/2022/03/01/release.html' };

  (function() {
    var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
  })();
</script>

                </div>
              </div>
              <!-- End Leave a Comment -->
            </div>
          </div>
        </div>
      </div>
      <!-- End Blog Content -->
      <!-- Start Blog Sidebar -->
      <!--
      <div class="col-md-3">
        <div class="row">
          <div class="blog-sidebar">
            <div class="col-md-12 col-sm-6">
              <aside id="dwqa-categories-2" class="widget widget_categories dwqa_widget dwqa_widget_categories sidebar-list">
                <h4 class="list-title">Categories</h4>
<ul>
	
	
    
	 <li><a href="topics/AngularJS">AngularJS</a></li> 
	

</ul>



              </aside>
            </div>
            <div class="col-md-12 col-sm-6">
              <aside class="widget dwqa-widget dwqa-popular-question">
                <div class="sidebar-popular-post dwqa-popular-questions">
                  <div class="popular-questions"> 
<h2 class="widget-title">Popular Questions</h2>
<ul>

    

    
     <li><a href="/category_one/question_two">Can I Start Learning AngularJS Framework ?</a></li>
    
     <li><a href="/category_one/question_one">What is AngularJS ?</a></li>
    

    
    
     <li><a href="/category_two/question_three">How Can I Learning ReactJS Framework ?</a></li>
    
     <li><a href="/category_two/question_two">How Can I Learning ReactJS Framework ?</a></li>
    

    
    
     <li><a href="/category_three/question_three">Can I Learning EmberJS Framework ?</a></li>
    
     <li><a href="/category_three/question_two">How Can I Learning EmberJS Framework ?</a></li>
    

    
    
     <li><a href="/category_four/question_one">What is VueJS ?</a></li>
    
     <li><a href="/category_four/question_two">How Can I Learning VueJS Framework ?</a></li>
    

 </ul>
</div>
                </div>
              </aside>
            </div>
          </div>
        </div>
      </div>
      -->
      <!-- End Blog Sidebar -->
    </div>
  </div>
</section>
<!-- End Blog Area -->


    <!-- Start Footer Area -->
    <footer>
        <div class="footer-area themeix-ptb">
            <div class="container">
                <div class="row">
                    <div class="footer-wrapper">
                        <div class="col-sm-6 col-md-3">
                            <div class="single-footer">
                                <h3 class="footer-heading">Follow Us</h3>
                                <div class="single-footer-text">
                                    <p>Keep track the latest news, blogs and updates of DGL by following our social media accounts.</p>
                                </div>
                                <div class="social-links">
                                    <ul>
                                        <li><a href="https://twitter.com/GraphDeep"><i class="fa fa-twitter"></i></a></li>
                                        <li class="fb-link"><a href="https://www.facebook.com/GraphDeep/"><i class="fa fa-facebook"></i></a></li>
                                        <li><a href="/feed.xml"><i class="fa fa-rss"></i></a></li>
                                        <!--<li class="gp-link"><a href="#"><i class="fa fa-google-plus"></i></a></li>-->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="single-footer">
                                <h3 class="footer-heading">Quick Links</h3>
                                <div class="footer-list">
                                    <ul>
                                        <li><a href="/pages/about.html">About us</a></li>
                                        <li><a href="/pages/start.html">Get started</a></li>
                                        <li><a href="https://github.com/dmlc/dgl/releases">Latest updates</a></li>
                                        <li><a href="/pages/index.html">Blogs</a></li>
                                        <li><a href="https://github.com/dmlc/dgl/">Github</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="single-footer">
                                <h3 class="footer-heading">Materials</h3>
                                <div class="footer-list">
                                    <ul>
                                        <li><a href="https://docs.dgl.ai/tutorials/models/index.html">Tutorials</a></li>
                                        <li><a href="https://discuss.dgl.ai">Discuss forum</a></li>
                                        <li><a href="https://github.com/dmlc/dgl/issues">Github issues</a></li>
                                        <li><a href="https://github.com/dmlc/dgl/blob/master/CONTRIBUTORS.md">Contributing</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="single-footer">
                                <h3 class="footer-heading">Contact Us</h3>
                                <div class="subscribe-form">
                                    <form action="https://formspree.io/f/maylbdvy" method="POST">
                                        <input type="text" name="name" id="name" class="form-control" placeholder="Name" required>
                                        <input type="text" name="message" id="message" class="form-control" placeholder="Message" required>
                                        <input type="email" name="_replyto" id="email" class="form-control" placeholder="Email" required>
                                        <button type="submit" class="hover-bg">Submit</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Start Footer Bottom Area -->
        <!--
        <div class="footer-bottom-area themeix-pb">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="footer-bottom">
                            <div class="footer-logo">
                                <a href="#"><img src="/assets/images/footer-logo.png" alt="logo"></a>
                            </div>
                            <div class="footer-links">
                                <ul>
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a href="#">Refund Policy</a></li>
                                    <li><a href="#">Disclaimer</a></li>
                                </ul>
                            </div>
                            <div class="copyright-text">
                                <p>All content Documenter &copy; 2017 - All rights reserved. - Proudly made with <a href="http://designingmarket.com">Designing Market</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        -->
        <!-- End Footer Bottom Area -->
        <!-- Start Scroll To Top -->
        <div class="scroll-top">
            <div class="scroll-icon">
                <i class="fa fa-angle-up"></i>
            </div>
        </div>
        <!-- End Scroll To Top -->
    </footer>
    <!-- End Footer Area -->

    <!-- jquery min -->
    <script src="/assets/js/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"></script>
    

    <!-- Bootstrap Js -->
    <script src="/assets/js/bootstrap.min.js"></script>

    <!-- jQuery Easing -->
    <script src="/assets/js/jquery.easing.js"></script>

    <!-- Owl Carousel Js -->
    <script src="/assets/js/owl.carousel.min.js"></script>

    <!-- Google Map -->
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOCx7VEftKaGSK2F2p_tUKmMSdN00palo"></script> -->

    <!-- Mean Menu -->
    <script src="/assets/js/jquery.meanmenu.js"></script>

    <!-- Particles JS CDN -->
    <script src="/assets/js/particles.min.js"></script> 

    <!-- Main Js -->
    <script src="/assets/js/main.js"></script>

    <!-- MathJax Js -->
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
</body>

</html>
