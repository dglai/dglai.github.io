<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dgl.to_block &mdash; DGL 2.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=0bf289b5" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=9caaf7ed"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=ccdb6887"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="dgl.to_cugraph" href="dgl.to_cugraph.html" />
    <link rel="prev" title="dgl.to_bidirected" href="dgl.to_bidirected.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DGL
          </a>
              <div class="version">
                2.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Install and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/blitz/index.html">A Blitz Introduction to DGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Materials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../stochastic_training/index.html">🆕 Stochastic Training of GNNs with GraphBolt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide_cn/index.html">用户指南【包含过时信息】</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide_ko/index.html">사용자 가이드[시대에 뒤쳐진]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphtransformer/index.html">🆕 Tutorial: Graph Transformer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/sparse/index.html">Tutorials: dgl.sparse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/cpu/index.html">Training on CPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/multi/index.html">Training on Multiple GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/dist/index.html">Distributed training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/models/index.html">Paper Study with DGL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api/python/dgl.html">dgl</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#graph-create-ops">Graph Create Ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#subgraph-extraction-ops">Subgraph Extraction Ops</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api/python/dgl.html#graph-transform-ops">Graph Transform Ops</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="dgl.add_edges.html">dgl.add_edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.add_nodes.html">dgl.add_nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.add_reverse_edges.html">dgl.add_reverse_edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.add_self_loop.html">dgl.add_self_loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.adj_product_graph.html">dgl.adj_product_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.adj_sum_graph.html">dgl.adj_sum_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.compact_graphs.html">dgl.compact_graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.khop_adj.html">dgl.khop_adj</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.khop_graph.html">dgl.khop_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.knn_graph.html">dgl.knn_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.laplacian_lambda_max.html">dgl.laplacian_lambda_max</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.line_graph.html">dgl.line_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.metapath_reachable_graph.html">dgl.metapath_reachable_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.metis_partition.html">dgl.metis_partition</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.metis_partition_assignment.html">dgl.metis_partition_assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.norm_by_dst.html">dgl.norm_by_dst</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.partition_graph_with_halo.html">dgl.partition_graph_with_halo</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.radius_graph.html">dgl.radius_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.remove_edges.html">dgl.remove_edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.remove_nodes.html">dgl.remove_nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.remove_self_loop.html">dgl.remove_self_loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.reorder_graph.html">dgl.reorder_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.reverse.html">dgl.reverse</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.segmented_knn_graph.html">dgl.segmented_knn_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.sort_csr_by_tag.html">dgl.sort_csr_by_tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.sort_csc_by_tag.html">dgl.sort_csc_by_tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_bidirected.html">dgl.to_bidirected</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">dgl.to_block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dgl.to_block"><code class="docutils literal notranslate"><span class="pre">to_block()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_cugraph.html">dgl.to_cugraph</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_double.html">dgl.to_double</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_float.html">dgl.to_float</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_half.html">dgl.to_half</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_heterogeneous.html">dgl.to_heterogeneous</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_homogeneous.html">dgl.to_homogeneous</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_networkx.html">dgl.to_networkx</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_simple.html">dgl.to_simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="dgl.to_simple_graph.html">dgl.to_simple_graph</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#graph-positional-encoding-ops">Graph Positional Encoding Ops:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#graph-partition-utilities">Graph Partition Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#batching-and-reading-out-ops">Batching and Reading Out Ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#adjacency-related-utilities">Adjacency Related Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#graph-traversal-message-propagation">Graph Traversal &amp; Message Propagation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#homophily-measures">Homophily Measures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#label-informativeness-measures">Label Informativeness Measures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/python/dgl.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.data.html">dgl.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.dataloading.html">dgl.dataloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.DGLGraph.html">dgl.DGLGraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.distributed.html">dgl.distributed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.function.html">dgl.function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.geometry.html">dgl.geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.graphbolt.html">🆕 dgl.graphbolt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/nn-pytorch.html">dgl.nn (PyTorch)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/nn.functional.html">dgl.nn.functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.ops.html">dgl.ops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.optim.html">dgl.optim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.sampling.html">dgl.sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.sparse_v0.html">dgl.sparse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/dgl.multiprocessing.html">dgl.multiprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/transforms.html">dgl.transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/udf.html">User-defined Functions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to DGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/ffi.html">DGL Foreign Function Interface (FFI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html">Performance Benchmarks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env_var.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DGL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api/python/dgl.html">dgl</a></li>
      <li class="breadcrumb-item active">dgl.to_block</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/dgl.to_block.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dgl-to-block">
<h1>dgl.to_block<a class="headerlink" href="#dgl-to-block" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="dgl.to_block">
<span class="sig-prename descclassname"><span class="pre">dgl.</span></span><span class="sig-name descname"><span class="pre">to_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_dst_in_src</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dgl/transforms/to_block.html#to_block"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dgl.to_block" title="Link to this definition"></a></dt>
<dd><p>Convert a graph into a bipartite-structured <em>block</em> for message passing.</p>
<p>A block is a graph consisting of two sets of nodes: the
<em>source</em> nodes and <em>destination</em> nodes.  The source and destination nodes can have multiple
node types.  All the edges connect from source nodes to destination nodes.</p>
<p>Specifically, the source nodes and destination nodes will have the same node types as the
ones in the original graph.  DGL maps each edge <code class="docutils literal notranslate"><span class="pre">(u,</span> <span class="pre">v)</span></code> with edge type
<code class="docutils literal notranslate"><span class="pre">(utype,</span> <span class="pre">etype,</span> <span class="pre">vtype)</span></code> in the original graph to the edge with type
<code class="docutils literal notranslate"><span class="pre">etype</span></code> connecting from node ID <code class="docutils literal notranslate"><span class="pre">u</span></code> of type <code class="docutils literal notranslate"><span class="pre">utype</span></code> in the source side to node
ID <code class="docutils literal notranslate"><span class="pre">v</span></code> of type <code class="docutils literal notranslate"><span class="pre">vtype</span></code> in the destination side.</p>
<p>For blocks returned by <a class="reference internal" href="#dgl.to_block" title="dgl.to_block"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_block()</span></code></a>, the destination nodes of the block will only
contain the nodes that have at least one inbound edge of any type.  The source nodes
of the block will only contain the nodes that appear in the destination nodes, as well
as the nodes that have at least one outbound edge connecting to one of the destination nodes.</p>
<p>The destination nodes are specified by the <code class="xref py py-attr docutils literal notranslate"><span class="pre">dst_nodes</span></code> argument if it is not None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="../api/python/dgl.DGLGraph.html#dgl.DGLGraph" title="dgl.DGLGraph"><em>DGLGraph</em></a>) – The graph.  Can be either on CPU or GPU.</p></li>
<li><p><strong>dst_nodes</strong> (<em>Tensor</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>Tensor</em><em>]</em><em>, </em><em>optional</em>) – <p>The list of destination nodes.</p>
<p>If a tensor is given, the graph must have only one node type.</p>
<p>If given, it must be a superset of all the nodes that have at least one inbound
edge.  An error will be raised otherwise.</p>
</p></li>
<li><p><strong>include_dst_in_src</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – <p>If False, do not include destination nodes in source nodes.</p>
<p>(Default: True)</p>
</p></li>
<li><p><strong>src_nodes</strong> (<em>Tensor</em><em> or </em><em>disct</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>Tensor</em><em>]</em><em>, </em><em>optional</em>) – <p>The list of source nodes (and prefixed by destination nodes if
<cite>include_dst_in_src</cite> is True).</p>
<p>If a tensor is given, the graph must have only one node type.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>The new graph describing the block.</p>
<p>The node IDs induced for each type in both sides would be stored in feature
<code class="docutils literal notranslate"><span class="pre">dgl.NID</span></code>.</p>
<p>The edge IDs induced for each type would be stored in feature <code class="docutils literal notranslate"><span class="pre">dgl.EID</span></code>.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DGLBlock</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>DGLError</strong> – If <code class="xref py py-attr docutils literal notranslate"><span class="pre">dst_nodes</span></code> is specified but it is not a superset of all the nodes that
    have at least one inbound edge.
    
    If <code class="xref py py-attr docutils literal notranslate"><span class="pre">dst_nodes</span></code> is not None, and <code class="xref py py-attr docutils literal notranslate"><span class="pre">g</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">dst_nodes</span></code>
    are not in the same context.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><a class="reference internal" href="#dgl.to_block" title="dgl.to_block"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_block()</span></code></a> is most commonly used in customizing neighborhood sampling
for stochastic training on a large graph.  Please refer to the user guide
<a class="reference internal" href="../guide/minibatch.html#guide-minibatch"><span class="std std-ref">Chapter 6: Stochastic Training on Large Graphs</span></a> for a more thorough discussion about the methodology
of stochastic training.</p>
<p>See also <a class="reference internal" href="dgl.create_block.html#dgl.create_block" title="dgl.create_block"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_block()</span></code></a> for more flexible construction of blocks.</p>
<p class="rubric">Examples</p>
<p>Converting a homogeneous graph to a block as described above:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">graph</span><span class="p">(([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">to_block</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">LongTensor</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
<p>The destination nodes would be exactly the same as the ones given: [3, 2].</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">induced_dst</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">dstdata</span><span class="p">[</span><span class="n">dgl</span><span class="o">.</span><span class="n">NID</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">induced_dst</span>
<span class="go">tensor([3, 2])</span>
</pre></div>
</div>
<p>The first few source nodes would also be exactly the same as
the ones given.  The rest of the nodes are the ones necessary for message passing
into nodes 3, 2.  This means that the node 1 would be included.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">induced_src</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">srcdata</span><span class="p">[</span><span class="n">dgl</span><span class="o">.</span><span class="n">NID</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">induced_src</span>
<span class="go">tensor([3, 2, 1])</span>
</pre></div>
</div>
<p>You can notice that the first two nodes are identical to the given nodes as well as
the destination nodes.</p>
<p>The induced edges can also be obtained by the following:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">edata</span><span class="p">[</span><span class="n">dgl</span><span class="o">.</span><span class="n">EID</span><span class="p">]</span>
<span class="go">tensor([2, 1])</span>
</pre></div>
</div>
<p>This indicates that edge (2, 3) and (1, 2) are included in the result graph.  You can
verify that the first edge in the block indeed maps to the edge (2, 3), and the
second edge in the block indeed maps to the edge (1, 2):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;eid&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">induced_src</span><span class="p">[</span><span class="n">src</span><span class="p">],</span> <span class="n">induced_dst</span><span class="p">[</span><span class="n">dst</span><span class="p">]</span>
<span class="go">(tensor([2, 1]), tensor([3, 2]))</span>
</pre></div>
</div>
<p>The destination nodes specified must be a superset of the nodes that have edges connecting
to them.  For example, the following will raise an error since the destination nodes
does not contain node 3, which has an edge connecting to it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">graph</span><span class="p">(([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dgl</span><span class="o">.</span><span class="n">to_block</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">LongTensor</span><span class="p">([</span><span class="mi">2</span><span class="p">]))</span>     <span class="c1"># error</span>
</pre></div>
</div>
<p>Converting a heterogeneous graph to a block is similar, except that when specifying
the destination nodes, you have to give a dict:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">heterograph</span><span class="p">({(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;_E&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])})</span>
</pre></div>
</div>
<p>If you don’t specify any node of type A on the destination side, the node type <code class="docutils literal notranslate"><span class="pre">A</span></code>
in the block would have zero nodes on the destination side.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">dgl</span><span class="o">.</span><span class="n">to_block</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">LongTensor</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">number_of_dst_nodes</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">number_of_dst_nodes</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">dstnodes</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">dgl</span><span class="o">.</span><span class="n">NID</span><span class="p">]</span>
<span class="go">tensor([3, 2])</span>
</pre></div>
</div>
<p>The source side would contain all the nodes on the destination side:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">srcnodes</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">dgl</span><span class="o">.</span><span class="n">NID</span><span class="p">]</span>
<span class="go">tensor([3, 2])</span>
</pre></div>
</div>
<p>As well as all the nodes that have connections to the nodes on the destination side:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">srcnodes</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">dgl</span><span class="o">.</span><span class="n">NID</span><span class="p">]</span>
<span class="go">tensor([2, 1])</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="dgl.create_block.html#dgl.create_block" title="dgl.create_block"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_block</span></code></a></p>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dgl.to_bidirected.html" class="btn btn-neutral float-left" title="dgl.to_bidirected" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dgl.to_cugraph.html" class="btn btn-neutral float-right" title="dgl.to_cugraph" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, DGL Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>